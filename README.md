# protagonist_tagger
Novels are a fascinating field of study, not only for philologists or literary scholars but also for scientists involved in Natural Language Processing (NLP). They are an excellent repository of knowledge about the language, people and their relations, historical events, places, expected behaviours, etc. Analysis of novels can pertain to the detection of the relations between protagonists, creating summaries, locations detection, creating timelines of events, and many more. A corpus of novels is the first step in completing these tasks. High-quality data in the corpus with proper annotations make the further work much more manageable. 

The first type of annotations which is crucial when discussing novels is this related to protagonists. Marking all appearances and all references to the main literary characters in the novel seems to be a handy feature to have in the corpus. Due to many ambiguities appearing in novels, their complex structure and very often a broad spectrum of protagonists, this task is not as easy as it seems. All these problems make the annotation of the literary characters much more complicated and sophisticated. 

Adequate protagonists' annotations are useful in further and more precise analysis of novels. It is not a straightforward task to decide how these annotations should be specified. Unfortunately, in some cases, it may be not enough to annotate each literary character with a general tag **person**. In order to be able to analyse the novel on deeper levels, we need contradistinction between protagonists. The most desired way is to have a separate tag for each protagonist and assign it to every appearance of this literary character in a text. Each tag ideally should contain a full name of the protagonist along with a personal title. Tracking down full names of literary characters sometimes may not be easy. In the novels, it is very often the case that only a first name occurs or only a surname preceded with a personal title. However, high-quality data should always be a priority. 
>"Her disappointment in **Charlotte <<Charlotte Lucas>>** made her turn with fonder regard to her sister, of whose rectitude and delicacy she was sure her opinion could never be shaken, and for whose happiness she grew daily more anxious, as **Bingley <<Charles Bingley>>** had now been gone a week and nothing more was heard of his return. **Jane <<Jane Bennet>>** had sent **Caroline <<Caroline Bingley>>** an early answer to her letter and was counting the days till she might reasonably hope to hear again. The promised letter of thanks from **Mr. Collins <<Mr William Collins>>** arrived on Tuesday, addressed to their father, and written with all the solemnity of gratitude which a twelvemonthâ€™s abode in the family might have prompted."  

The desired outcome of the project is a reasonably big corpus with novels. Every protagonist in each novel should be annotated with their proper name. The label ideally is a full name of the literary character preceded with the proper personal title if needed. An example of such annotated text is given above. Generally, the prepared tool is supposed to work automatically with a list of protagonists' names and a text of the novel given as an input. Let us call this tool a **protagonistTagger** just for reference. An indirect outcome of the project is a model for recognizing appearances of protagonists in a novel. This model is based on Named Entity Recognition (NER). 

#General Project Workflow
The process of creating the corpus of annotated novels and the **protagonistTagger** tool comprises several stages. Each stage is generally speaking a separate task with different assumptions. The main stages are as follows:
- Gathering an initial corpus with plain novels' texts without annotations. 
- Creating a list of full names of all protagonists for each novel in the initial corpus. These names are the predefined tags that will be used in further steps for annotations.
- Recognizing named entity of category **person** in the texts of the novels in the initial corpus. Training NER model from scratch for this specific problem is not reasonable due to the amount of time and computing power it requires. It is possible to use some pre-trained NER model and fine-tune it using a sample of manually annotated data. The evaluation of the NER mechanism is done on a testing set extracted from the full texts of novels. The task is quite complex and may include several iterations.
- Each named entity of category **person**  recognized by NER in the previous step is a potential candidate to be annotated with one of our tags predefined in step 3. At this point, an algorithm (let us call it **matching algorithm** for reference), based on approximate string matching, is used to choose from the list of predefined tags the one that matches most accurately the recognized named entity. 
- The annotations did by the **matching algorithm** are accessed according to their accuracy and correctness.
- The **protagonistTagger** (fine-tuned NER + matching algorithm) is used to annotate more novels in order to create the corpus of annotated novels. 

The two most interesting parts of the procedure are fine-tuning NER from step 3 and the **matching algorithm** from step 4. The analysis of NER in novels is a fascinating field of study because there are plenty of surprising literary characters in the novels. For example, **The creature** in **Frankenstein** by Mary Shelley is one of the main protagonists in the novel. However, it is difficult to blame the NER model for not recognizing it as a **person** . Many nuances need to be considered in order to achieve the satisfying performance of NER in novels. 

The process of creating **matching algorithm** offers no fewer surprises. The method is about to mark all protagonists in a given text with a proper tag, having given the list of tags predefined for each novel. Creating this algorithm required an in-depth analysis of the problem of identifying protagonists in novels. Of course, it is possible to read all the novels in the corpus and tag all the protagonists manually, but it requires a tremendous amount of time and many annotators. Novels, being rather long and complex texts, are not suitable for such arduous work. In a real-world situation, while reading a novel from the very beginning, we do not have any problems with figuring out which protagonists are mentioned in the following sentences. However, when we take a random sentence from the novel, even having read the whole text before, it may be challenging to say which protagonist is being considered. In novels, there are many ambiguities which are not apparent at the outset. For example, there may be a whole family with the same surname, let us say, Smith. In a novel, a protagonist named **Mr Smith** is mentioned. How can we say in such case if he is John Smith - a son or Edward Smith - a father. It is only one of the most common problems. While analyzing some exemplary novels, one can encounter many more ambiguities, and some of them are handled in the **matching algorithm**.
